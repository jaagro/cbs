<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jaagro.cbs.biz.mapper.CoopMapperExt">

    <!--          自动生成扩展XML author: generator on 2019/2/21                 -->
    <resultMap id="CoopDeviceResultMap" type="com.jaagro.cbs.api.dto.plant.ReturnCoopDeviceDto">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="customer_id" property="customerId" jdbcType="INTEGER"/>
        <result column="plant_id" property="plantId" jdbcType="INTEGER"/>
        <result column="home_number" property="homeNumber" jdbcType="INTEGER"/>
        <result column="capacity" property="capacity" jdbcType="INTEGER"/>
        <result column="breeding_value" property="breedingValue" jdbcType="INTEGER"/>
        <result column="device_quantity" property="deviceQuantity" jdbcType="INTEGER"/>
        <result column="coop_status" property="coopStatus" jdbcType="INTEGER"/>
        <result column="last_start_date" property="lastStartDate" jdbcType="DATE"/>
        <result column="last_end_date" property="lastEndDate" jdbcType="DATE"/>
        <result column="notes" property="notes" jdbcType="VARCHAR"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="create_user_id" property="createUserId" jdbcType="INTEGER"/>
        <collection property="coopDevices" column="id"
                    select="com.jaagro.cbs.biz.mapper.CoopDeviceMapperExt.selectByPrimaryKey"></collection>
    </resultMap>
    <select id="listCoopDeviceByCoopExample" resultMap="BaseResultMap" parameterType="com.jaagro.cbs.api.model.Coop">
        select
        <include refid="Base_Column_List"/>
        from coop
        where 1=1
        <if test="id!=null">
            and id = #{id,jdbcType=INTEGER}
        </if>
        <if test="plantId!=null">
            and plant_id=#{plantId}
        </if>
    </select>

</mapper>